CREATE ROLE vrentalsuser WITH
	LOGIN
	NOSUPERUSER
	NOCREATEDB
	NOCREATEROLE
	INHERIT
	NOREPLICATION
	CONNECTION LIMIT -1;

CREATE SCHEMA rentals
    AUTHORIZATION postgres;
grant usage on schema rentals to vrentalsuser;
ALTER ROLE vrentalsuser
	PASSWORD 'wifi';

CREATE TABLE rentals.tbl_users
(
    pk_users serial NOT NULL,
    vorname character varying,
    nachname character varying,
    geschlecht integer,
    geburtsdatum date,
    geburtsort character varying,
    username character varying,
    passwort character varying,
    rolle integer,
    fk_users_kontaktliste bit,
    registrierungstag date,
    letzteanmeldung date,
    PRIMARY KEY (pk_users)
);

create sequence rentals.tbl_users_seq start with 1 increment by 1;
grant usage on rentals.tbl_users_seq to vrentalsuser;

ALTER TABLE IF EXISTS rentals.tbl_users
    OWNER to vrentalsuser;

ALTER TABLE IF EXISTS rentals.tbl_users
    ADD COLUMN benutzermerkmal character varying;

ALTER TABLE IF EXISTS rentals.tbl_users
    ADD COLUMN merkmalgiltbis date;


grant select, insert, update, delete on rentals.tbl_users to vrentalsuser;
